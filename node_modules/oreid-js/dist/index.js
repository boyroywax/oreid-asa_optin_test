!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("uuid"),require("canonicalize"),require("jwt-decode"),require("js-base64"),require("@aikon/eos-transit"),require("@msgpack/msgpack"),require("axios"),require("crypto-js/hmac-sha256"),require("js-cookie")):"function"==typeof define&&define.amd?define(["exports","uuid","canonicalize","jwt-decode","js-base64","@aikon/eos-transit","@msgpack/msgpack","axios","crypto-js/hmac-sha256","js-cookie"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["oreid-js"]={},e.uuid,e.canonicalize,e.jwtDecode,e.jsBase64,e.eosTransit,e.msgpack,e.axios,e.HmacSHA256,e.Cookie)}(this,(function(e,t,n,r,o,i,s,a,c,u){"use strict";function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=l(n),p=l(r),h=l(a),f=l(c),v=l(u),g=function(e,t){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},g(e,t)};function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var T,w,m,k,b,A,I,_,C,P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};function E(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function S(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))}function N(e,t){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function x(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}e.RequestType=void 0,(T=e.RequestType||(e.RequestType={})).Get="get",T.Post="put",e.ApiEndpoint=void 0,(w=e.ApiEndpoint||(e.ApiEndpoint={})).AddPermission="account/add-permission",w.AppToken="app-token",w.CanAutoSign="transaction/can-auto-sign",w.ConvertOauthTokens="account/convert-oauth",w.CustodialMigrateAccount="custodial/migrate-account",w.CustodialNewAccount="custodial/new-user",w.CustodialSign="custodial/sign",w.GetUser="account/user",w.GetConfig="services/config",w.LoginUserWithToken="account/login-user-with-token",w.NewUserWithToken="account/new-user-with-token",w.PasswordLessSendCode="account/login-passwordless-send-code",w.PasswordLessVerifyCode="account/login-passwordless-verify-code",w.TransactionSign="transaction/sign",e.ConfigType=void 0,(e.ConfigType||(e.ConfigType={})).Chains="chains",e.ChainPlatformType=void 0,(m=e.ChainPlatformType||(e.ChainPlatformType={})).algorand="algorand",m.eos="eos",m.ethereum="ethereum",m.ore="ore",e.ChainNetwork=void 0,(k=e.ChainNetwork||(e.ChainNetwork={})).AlgoMain="algo_main",k.AlgoBeta="algo_beta",k.AlgoTest="algo_test",k.EosMain="eos_main",k.EosKylin="eos_kylin",k.EosJugle="eos_jungle",k.EthMain="eth_main",k.EthRopsten="eth_ropsten",k.EthRinkeby="eth_rinkeby",k.OreMain="ore_main",k.OreTest="ore_test",k.DappKylin1="kylin-dsp-1.liquidapps.io",k.DappKylin2="kylin-dsp-2.liquidapps.io",k.TelosMain="telos_main",k.TelosTest="telos_test",k.WaxMain="wax_main",k.WaxTest="wax_test",k.UxMain="ux_main",k.PolygonMain="polygon_main",k.PolygonMumbai="polygon_mumbai",e.AccountType=void 0,(b=e.AccountType||(e.AccountType={})).Native="native",b.Pending="pending",b.VirtualLiquid="liquid",b.VirtualNested="nested",e.LoginProvider=void 0,(A=e.LoginProvider||(e.LoginProvider={})).Custodial="custodial",A.Apple="apple",A.Email="email",A.Facebook="facebook",A.Github="github",A.Google="google",A.Instagram="instagram",A.Kakao="kakao",A.Line="line",A.LinkedIn="linkedin",A.Phone="phone",A.Twitch="twitch",A.Twitter="twitter",e.ExternalWalletType=void 0,(I=e.ExternalWalletType||(e.ExternalWalletType={})).AlgoSigner="algosigner",I.Keycat="keycat",I.Ledger="ledger",I.Lynx="lynx",I.Meetone="meetone",I.Metro="metro",I.Portis="portis",I.Scatter="scatter",I.SimpleEos="simpleos",I.TokenPocket="tokenpocket",I.WalletConnect="walletconnect",I.Web3="web3",I.WhaleVault="whalevault",e.AuthProvider=void 0,(_=e.AuthProvider||(e.AuthProvider={})).Custodial="custodial",_.Apple="apple",_.Email="email",_.Facebook="facebook",_.Github="github",_.Google="google",_.Instagram="instagram",_.Kakao="kakao",_.Line="line",_.LinkedIn="linkedin",_.Phone="phone",_.Twitch="twitch",_.Twitter="twitter",_.AlgoSigner="algosigner",_.Keycat="keycat",_.Ledger="ledger",_.Lynx="lynx",_.Meetone="meetone",_.Metro="metro",_.Portis="portis",_.Scatter="scatter",_.SimpleEos="simpleos",_.TokenPocket="tokenpocket",_.WalletConnect="walletconnect",_.Web3="web3",_.WhaleVault="whalevault",_.OreId="oreid",e.ExternalWalletInterface=void 0,(e.ExternalWalletInterface||(e.ExternalWalletInterface={})).Transit="transit",e.ApiKeyUsedFor=void 0,(C=e.ApiKeyUsedFor||(e.ApiKeyUsedFor={})).AccountMigration="accountMigration",C.Airdrop="airdrop",C.AdminAccess="adminAccess",C.AutoSigning="autoSigning",C.ChangePassword="changePassword",C.CreateUser="createUser",C.ProxySigning="proxySigning",C.TokenFunding="tokenFunding",e.RecoverAccountAction=void 0,(e.RecoverAccountAction||(e.RecoverAccountAction={})).Republic="republic";var O;e.WebWidgetAction=void 0,(O=e.WebWidgetAction||(e.WebWidgetAction={})).Auth="auth",O.Logout="logout",O.NewChainAccount="newChainAccount",O.RecoverAccount="recoverAccount",O.Sign="sign";var D=function(e,t,n){return e.replace(new RegExp(t,"g"),n)},W=function(){function n(){}return n.isNullOrEmpty=function(e){return void 0===e||(null===e||(!(!Array.isArray(e)||0!==e.length)||0===Object.keys(e).length&&e.constructor===Object))},n.log=function(e,t){},n.jwtDecodeSafe=function(e){var t;if(this.isNullOrEmpty(e))return null;try{t=p.default(e)}catch(e){}return t},n.parseUrlParams=function(e){var t,n={};try{var r=new URL(e);t=r.hash?r.hash.slice(1):r.search}catch(n){t=e}return new URLSearchParams(t).forEach((function(e,t){n[t]=decodeURIComponent(e)||"true"})),n},n.tryParseJSON=function(e,t,r){void 0===t&&(t=!1),void 0===r&&(r=!1);var o="";if(!e||!n.isAString(e)||""===e.trim())return null;try{t&&(e=decodeURI(e)),o=e,r&&(o=D(e,"'",'"'),o=D(o,"`",'"'));var i=JSON.parse(o,n.jsonParseComplexObjectReviver);if(i&&"object"==typeof i)return i}catch(e){}return null},n.jsonParseComplexObjectReviver=function(e,t){if(null!==t&&"object"==typeof t&&"type"in t&&"Buffer"===t.type&&"data"in t&&Array.isArray(t.data))return Buffer.from(t.data);if(null!==t&&"object"==typeof t&&!Array.isArray(t)&&"0"in t&&n.isANumber(t[0])){var r=Object.entries(t).map((function(e){return x(e,2)[1]}));if(r.every((function(e){return n.isANumber(e)||e<256})))return new Uint8Array(r)}return t},n.base64DecodeSafe=function(e){var t={};if(this.isNullOrEmpty(e))return null;try{t=o.Base64.decode(e),n.tryParseJSON(t)&&(t=JSON.parse(t))}catch(e){return null}return t},n.base64Encode=function(e){if(!e)return null;var t=e;return n.isAnObject(t)&&(t=JSON.stringify(t)),o.Base64.encode(t)},n.sleep=function(e){return new Promise((function(t){return setTimeout(t,e)}))},n.createGuid=function(){return t.v4()},n.isInEnum=function(e,t){return Object.values(e).includes(t)},n.toEnumValue=function(e,t,n){if(void 0===n&&(n=!1),this.isNullOrEmpty(t))return null;if(this.isInEnum(e,t))return t;var r="Value ".concat(JSON.stringify(t)," is not a valid member of enum ").concat(JSON.stringify(e),".");if(n)throw new Error(r);return null},n.getErrorCodesFromParams=function(e){var t,n=e.error_code||e.errorCode,r=e.error_message||e.errorMessage;return n&&(t=n.split(/[/?/$&]/)),(t||r)&&(t=t||[]).push(r),t},n.extractDataFromCallbackUrl=function(e){var t={};if(e){t=this.parseUrlParams(e);var n=this.getErrorCodesFromParams(t);return P(P({},t),{errors:n})}return t},n.asyncForEach=function(e,t){return S(this,void 0,void 0,(function(){var n;return N(this,(function(r){switch(r.label){case 0:n=0,r.label=1;case 1:return n<e.length?[4,t(e[n],n,e)]:[3,4];case 2:r.sent(),r.label=3;case 3:return n+=1,[3,1];case 4:return[2]}}))}))},n.getClaimFromJwtTokenBySearchString=function(e,t){var n;return this.isAnObject(e)?(Object.keys(e).forEach((function(r){r.includes(t)&&(n=e[r])})),n):null},n.getErrorFromAxiosError=function(e){if("network error"===(null==e?void 0:e.message.toLowerCase()))throw new Error("Browser threw a Network Error. This is likely because of CORS error. Make sure that you are not sending an api-key in the header of the request.");if("ECONNREFUSED"===(null==e?void 0:e.code))throw new Error("Could not connect to ORE ID service. ".concat(e.message,"."));if(!n.isAxiosError(e))return e;var t=((null==e?void 0:e.response)||{}).data,r=void 0===t?{}:t,o=r.message,i=this.getErrorCodesFromParams(r),s=i&&(null==i?void 0:i.length)>1?i.join(", "):i;return Error(s||o||"unknown error")},n.isAxiosError=function(e){return void 0!==e.isAxiosError},n.isAString=function(e){return!!e&&("string"==typeof e||e instanceof String)},n.isADate=function(e){return e instanceof Date},n.isABoolean=function(e){return"boolean"==typeof e||e instanceof Boolean},n.isANumber=function(e){return!Number.isNaN(e)&&("number"==typeof e||e instanceof Number)},n.isAnObject=function(e){return null!==e&&"object"==typeof e},n.assertValidProvider=function(t){if(n.isInEnum(e.AuthProvider,t))return!0;throw new Error("Auth provider ".concat(t," is not a valid option"))},n.mapAuthProviderToWalletType=function(t){return t?n.toEnumValue(e.ExternalWalletType,t):null},n.isCustodial=function(t){return t===e.AuthProvider.Custodial},n.isValidEmail=function(e){if(!e)return!1;return/^(([^<>()[]\\.,;:\s@]+(\.[^<>()[]\\.,;:\s@]+)*)|(.+))@(([[0-9]{1,3}\[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},n.sortJson=function(e){if(!e)return e;var t=d.default(e);return JSON.parse(t)},n.getUniqueValues=function(e){return Array.from(new Set(e.map((function(e){return JSON.stringify(e)})))).map((function(e){return JSON.parse(e)}))},n.runAtTime=function(e,t){var n=Date.now(),r=Math.max(t,n);return setTimeout(e,r-n)},n.objectsAreEqual=function(e,t){var r,o;if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t||null==e||null==t)return!1;var i=Object.keys(e),s=Object.keys(t);if(i.length!==s.length)return!1;try{for(var a=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(!s.includes(u))return!1;if("function"==typeof e[u]||"function"==typeof t[u]){if(e[u].toString()!==t[u].toString())return!1}else if(!n.objectsAreEqual(e[u],t[u]))return!1}}catch(e){r={error:e}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return!0},n.isInBrowser="undefined"!=typeof window,n}(),q=W.isNullOrEmpty;function L(e,t){var n;if(!e.accessToken&&!(null===(n=e.options)||void 0===n?void 0:n.apiKey))throw new Error("Missing required header for API ".concat(t,": Must have a valid user accessToken or options.apiKey"))}function U(e,t,n){var r;if(!(null===(r=e.options)||void 0===r?void 0:r.apiKey)){var o=t?" - with ".concat(t," right."):".";throw new Error("Missing required header for API ".concat(n,": Must have an options.apiKey").concat(o))}}function j(e,t,n){void 0===e&&(e={});var r=[];if(t.forEach((function(t){q(e[t])&&r.push(t)})),!q(r))throw new Error("Missing required parameter(s) for API ".concat(n,": ").concat(r.join(", ")))}function R(e,t,n){if(void 0===e&&(e={}),t.filter((function(t){return!q(e[t])})).length>1)throw new Error("You can only provide one of these parameter(s) for API ".concat(n,": ").concat(t.join(", ")))}function H(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c,u;return N(this,(function(l){switch(l.label){case 0:return r=e.ApiEndpoint.AddPermission,L(t,r),j(n,["account","chainAccount","chainNetwork","permission","publicKey"],r),o=n.account,i=n.permission,s=n.provider,a=n.parentPermission,c={},s&&(c["wallet-type"]=s),a&&(c["parent-permission"]=a),u=P({account:o,"chain-account":n.chainAccount,"chain-network":n.chainNetwork,"public-key":n.publicKey,permission:i},c),[4,t.callOreIdApi(e.RequestType.Get,e.ApiEndpoint.AddPermission,u,null)];case 1:return[2,l.sent()]}}))}))}function F(t,n){return S(this,void 0,void 0,(function(){var r,o;return N(this,(function(i){switch(i.label){case 0:return r=e.ApiEndpoint.AppToken,o=n.appAccessTokenMetadata,W.isNullOrEmpty(o)?U(t,null,r):U(t,e.ApiKeyUsedFor.CreateUser,r),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.AppToken,o,null)];case 1:return[2,i.sent().appAccessToken]}}))}))}function K(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c,u,l;return N(this,(function(d){switch(d.label){case 0:return r=e.ApiEndpoint.CanAutoSign,o=n.account,i=n.chainAccount,s=n.chainNetwork,a=n.signedTransaction,c=n.transaction,u=n.transactionChainAccount,U(t,e.ApiKeyUsedFor.AutoSigning,r),j(n,["account","chainNetwork","chainAccount"],r),R(n,["transaction","signedTransaction"],r),l={account:o,chain_account:i,chain_network:s},c&&(l.transaction=W.base64Encode(c)),a&&(l.signed_transaction=W.base64Encode(a)),c&&(l.transaction_chain_acccount=u),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.CanAutoSign,l,null)];case 1:return[2,d.sent()]}}))}))}function M(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return r=e.ApiEndpoint.ConvertOauthTokens,o=n.accessToken,i=n.idToken,L(t,r),j(n,["idToken"],r),s={},o&&(s.access_token=o),i&&(s.id_token=i),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.ConvertOauthTokens,s,null)];case 1:return[2,a.sent()]}}))}))}function V(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c,u,l;return N(this,(function(d){switch(d.label){case 0:return r=e.ApiEndpoint.CustodialMigrateAccount,o=n.account,i=n.chainAccount,s=n.chainNetwork,a=n.toType,c=n.userPassword,u=n.userPasswordEncrypted,l={account:o,chain_account:i,chain_network:s,to_type:a,user_password:c,user_password_encrypted:u},U(t,e.ApiKeyUsedFor.AccountMigration,r),j(n,["account","chainAccount","chainNetwork","toType"],r),R(n,["user_password","user_password_encrypted"],r),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.CustodialMigrateAccount,l,null)];case 1:return[2,d.sent()]}}))}))}function B(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c,u,l,d,p;return N(this,(function(h){switch(h.label){case 0:if(r=e.ApiEndpoint.CustodialNewAccount,o=n.accountType,i=n.email,s=n.idToken,a=n.name,c=n.picture,u=n.phone,l=n.userName,d=n.userPassword,p={account_type:o,email:i,id_token:s,name:a,phone:u,picture:c,user_name:l,user_password:d},U(t,e.ApiKeyUsedFor.CreateUser,r),j(n,["accountType"],r),R(n,["user_password","user_password_encrypted","user_password_encrypted_backup"],r),!(s||i&&a))throw new Error("Missing required parameter(s) for API ".concat(r,": Must include email AND name or an idToken"));return[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.CustodialNewAccount,p,null)];case 1:return[2,h.sent()]}}))}))}function z(t,n){return S(this,void 0,void 0,(function(){var r,o,i;return N(this,(function(s){switch(s.label){case 0:return r=e.ApiEndpoint.GetConfig,L(t,r),j(n,["configType"],r),o=n.configType,i={type:o},[4,t.callOreIdApi(e.RequestType.Get,e.ApiEndpoint.GetConfig,i,null)];case 1:return[2,s.sent().values]}}))}))}function J(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return r=e.ApiEndpoint.GetUser,o=n.account,L(t,r),j(n,["account"],r),i={account:o},[4,t.callOreIdApi(e.RequestType.Get,e.ApiEndpoint.GetUser,i)];case 1:return s=a.sent(),[2,function(e){var t;return(null==e?void 0:e.processId)&&(t=e.processId,delete e.processId),{data:e,processId:t}}(s).data]}}))}))}function G(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return r=e.ApiEndpoint.LoginUserWithToken,o=n.accessToken,i=n.idToken,R(n,["accessToken","idToken"],r),s={},o&&(s.access_token=o),i&&(s.id_token=i),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.LoginUserWithToken,s,null)];case 1:return[2,a.sent()]}}))}))}function Y(t,n){return S(this,void 0,void 0,(function(){var r,o,i;return N(this,(function(s){switch(s.label){case 0:return r=e.ApiEndpoint.NewUserWithToken,o=n.idToken,j(n,["idToken"],r),i={id_token:o},[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.NewUserWithToken,i,null)];case 1:return[2,s.sent()]}}))}))}function Z(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a;return N(this,(function(c){switch(c.label){case 0:return r=e.ApiEndpoint.PasswordLessSendCode,L(t,r),j(n,["provider"],r),R(n,["email","phone"],r),o=n.email,i=n.phone,s=n.provider,a={provider:s},o&&(a.email=encodeURIComponent(o)),i&&(a.phone=encodeURIComponent(i)),[4,t.callOreIdApi(e.RequestType.Get,e.ApiEndpoint.PasswordLessSendCode,a,null)];case 1:return[2,c.sent()]}}))}))}function $(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:return r=e.ApiEndpoint.PasswordLessVerifyCode,L(t,r),j(n,["code","provider"],r),R(n,["email","phone"],r),o=n.code,i=n.email,s=n.phone,a=n.provider,c={code:o,provider:a},i&&(c.email=encodeURIComponent(i)),s&&(c.phone=encodeURIComponent(s)),[4,t.callOreIdApi(e.RequestType.Get,e.ApiEndpoint.PasswordLessVerifyCode,c,null)];case 1:return[2,u.sent()]}}))}))}function Q(e){var t,n=e.transactionData||{},r=n.account,o=n.chainAccount,i=n.chainNetwork,s=n.expireSeconds,a=n.signedTransaction,c=n.transaction,u=n.transactionChainAccount,l=n.transactionRecordId,d=(null===(t=e.transactionData)||void 0===t?void 0:t.signOptions)||{},p=d.allowChainAccountSelection,h=d.broadcast,f=d.generateAutoSignCredential,v=d.multiSigChainAccounts,g=d.returnSignedTransaction,y=d.userPassword,T=d.userPasswordEncrypted,w=e.autoSign,m={account:r,broadcast:h,chain_account:o,chain_network:i};return p&&(m.allow_chain_account_selection=p),w&&(m.auto_sign=w),s&&(m.expire_seconds=s),f&&(m.generate_auto_sign_credential=f),v&&(m.multisig_chain_accounts=v),g&&(m.return_signed_transaction=g),a&&(m.signed_transaction=W.base64Encode(a)),u&&(m.transaction_chain_acccount=u),c&&(m.transaction=W.base64Encode(c)),l&&(m.transaction_record_id=l),y&&(m.user_password=y),T&&(m.user_password_encrypted=T),m}function X(e){var t=e.signed_transaction,n=e.transaction_id,r=E(e,["signed_transaction","transaction_id"]);return P({signedTransaction:t,transactionId:n},r)}function ee(t,n){return S(this,void 0,void 0,(function(){var r,o;return N(this,(function(i){switch(i.label){case 0:return r=e.ApiEndpoint.TransactionSign,(null==n?void 0:n.autoSign)?U(t,e.ApiKeyUsedFor.AutoSigning,r):L(t,r),j(n.transactionData,["account","chainNetwork","chainAccount"],r),R(n.transactionData,["transaction","signedTransaction"],r),o=Q(n),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.TransactionSign,o,null)];case 1:return[2,X(i.sent())]}}))}))}function te(t,n){return S(this,void 0,void 0,(function(){var r,o,i;return N(this,(function(s){switch(s.label){case 0:return r=e.ApiEndpoint.CustodialSign,o=(n.transactionData||{}).signOptions,U(t,e.ApiKeyUsedFor.ProxySigning,r),j(n.transactionData,["account","chainNetwork","chainAccount"],r),R(n.transactionData,["transaction","signedTransaction"],r),R(o,["userPassword","userPasswordEncrypted"],r),i=Q(n),[4,t.callOreIdApi(e.RequestType.Post,e.ApiEndpoint.CustodialSign,i,null)];case 1:return[2,X(s.sent())]}}))}))}var ne=require("../package.json"),re=["metro"],oe=ne.version,ie=[e.ApiEndpoint.LoginUserWithToken],se=W.isNullOrEmpty;function ae(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l,d,p,h,f;return N(this,(function(v){if(n=t.account,r=t.accountType,o=t.chainNetwork,i=t.accountOptions,s=t.provider,a=t.callbackUrl,c=t.backgroundColor,u=t.state,l=e.options.oreIdUrl,d={paramsNewAccount:{account:n,accountType:r,chainNetwork:o,accountOptions:i}},!(n&&r&&o&&s&&a))throw new Error("Missing a required parameter");return p="&oauth_access_token=".concat(e.accessToken),h=u?"&state=".concat(u):"",f="".concat(l,"/new-account#provider=").concat(s,"&chain_network=").concat(o)+"&callback_url=".concat(encodeURIComponent(a),"&background_color=").concat(encodeURIComponent(c)).concat(h).concat(p),[2,e.addAccessTokenAndHmacToUrl(f,d)]}))}))}function ce(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l,d,p,h,f,v,g,y,T,w,m;return N(this,(function(k){if(n=t.code,r=t.email,o=t.phone,i=t.provider,s=t.callbackUrl,a=t.backgroundColor,c=t.state,u=t.linkToAccount,l=t.returnAccessToken,d=t.returnIdToken,p=e.options.oreIdUrl,!i||!s)throw new Error("Missing a required parameter");return h=c?"&state=".concat(c):"",f=u?"&link_to_account=".concat(u):"",v=n?"&code=".concat(n):"",g=r?"&email=".concat(encodeURIComponent(r)):"",y=o?"&phone=".concat(encodeURIComponent(o)):"",T=l?"&return_access_token=".concat(l):"",w=d?"&return_id_token=".concat(d):"",m="".concat(p,"/auth#provider=").concat(i)+"".concat(v).concat(g).concat(y)+"&callback_url=".concat(encodeURIComponent(s),"&background_color=").concat(encodeURIComponent(a)).concat(f).concat(h).concat(T).concat(w),[2,e.addAccessTokenAndHmacToUrl(m,null)]}))}))}function ue(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c,u,l,d,p,h,f,v,g,y,T,w,m,k;return N(this,(function(b){if(n=t.account,r=t.chainNetwork,o=t.expireSeconds,i=t.signedTransaction,s=t.transaction,a=t.transactionRecordId,c=(null==t?void 0:t.signOptions)||{},u=c.allowChainAccountSelection,l=c.broadcast,d=c.callbackUrl,p=c.multiSigChainAccounts,h=c.provider,f=c.returnSignedTransaction,v=c.state,g=t.chainAccount,y=e.options.oreIdUrl,!n||!d||!s&&!i)throw new Error("Missing a required parameter");return g||(g=n),T=W.base64Encode(s),w=W.base64Encode(i),m=v?"&state=".concat(v):"",m+=se(s)?"":"&transaction=".concat(T),m+=se(i)?"":"&signed_transaction=".concat(w),m+=se(u)?"":"&allow_chain_account_selection=".concat(u),m+=se(o)?"":"&expire_seconds=".concat(o),m+=se(p)?"":"&multisig_chain_accounts=".concat(p),m+=se(h)?"":"&provider=".concat(h),m+=se(f)?"":"&return_signed_transaction=".concat(f),m+=se(a)?"":"&transaction_record_id=".concat(a),m+="&oauth_access_token=".concat(e.accessToken),k="".concat(y,"/sign#account=").concat(n,"&broadcast=").concat(l,"&callback_url=").concat(encodeURIComponent(d),"&chain_account=").concat(g,"&chain_network=").concat(encodeURIComponent(r)).concat(m),[2,e.addAccessTokenAndHmacToUrl(k,null)]}))}))}function le(e){var t=function(e){for(var t in e)if(e.hasOwnProperty(t)&&(!e[t]||0===e[t].length))return{containsEmpty:!0,firstEmptyKey:t};return{containsEmpty:!1,firstEmptyKey:void 0}}(e);if(t.containsEmpty)throw new Error("The object contains empty or 0 values. First empty or 0 value encountered during encoding: "+t.firstEmptyKey);return s.encode(e,{sortKeys:!0})}var de=function(e,t){t(e.keyToAccountMap)},pe=[{providerName:e.ExternalWalletType.AlgoSigner,chainType:e.ChainPlatformType.algorand,providerId:"algosigner",requiresLogin:!1,supportsDiscovery:!0,supportsSignArbitrary:!1,requiresLogoutLoginToDiscover:!1,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login.",sign:"",discover:"",versionsRequired:""},discoveryKeyLookupFunc:function(e,t){t(e.keys.map((function(e){var t=JSON.parse(e.note);return{index:e.index,key:e.key,accounts:[{account:null==t?void 0:t.accountName,authorization:null==t?void 0:t.permission}]}})))},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-algosigner-logo.png"},{providerName:e.ExternalWalletType.Keycat,chainType:e.ChainPlatformType.eos,providerId:"Keycat",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"Keycat requires logging in through the Keycat app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-keycat-logo.png"},{providerName:e.ExternalWalletType.Ledger,chainType:e.ChainPlatformType.eos,providerId:"ledger",requiresLogin:!0,supportsDiscovery:!0,supportsSignArbitrary:!1,requiresLogoutLoginToDiscover:!1,requiresDiscoverToLogin:!0,defaultDiscoveryPathIndexList:[0,1,2],helpText:{login:"This wallet doesn’t require you to login",sign:"Connect and unlock your Ledger with your PIN code. Launch the EOS app on the device.",discover:"Connect and unlock your Ledger with your PIN code. Launch the EOS app on the device.",versionsRequired:"You need to have recent versions of your browser, Ledger firmware, and the Ledger EOS app. Click here for more details."},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-ledger-logo.png"},{providerName:e.ExternalWalletType.Lynx,chainType:e.ChainPlatformType.eos,providerId:"EOS Lynx",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"EOS Lynx requires logging in through the EOS Lynx app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-lynx-logo.png"},{providerName:e.ExternalWalletType.Meetone,chainType:e.ChainPlatformType.eos,providerId:"meetone_provider",requiresLogin:!1,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-meetone-logo.png"},{providerName:e.ExternalWalletType.Metro,chainType:e.ChainPlatformType.eos,providerId:"metro",requiresLogin:!1,supportsDiscovery:!1,supportsSignArbitrary:!1,requiresLogoutLoginToDiscover:!1,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-generic-logo.png"},{providerName:e.ExternalWalletType.Portis,chainType:e.ChainPlatformType.eos,providerId:"PortisProvider",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!1,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"Portis requires logging in through the Portis app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-portis-logo.png"},{providerName:e.ExternalWalletType.Scatter,chainType:e.ChainPlatformType.eos,providerId:"scatter",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"Scatter requires logging in through the Scatter app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-scatter-logo.png"},{providerName:e.ExternalWalletType.SimpleEos,chainType:e.ChainPlatformType.eos,providerId:"simpleos",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!1,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"Simpleos requires logging in through the Simpleos app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-simpleos-logo.png"},{providerName:e.ExternalWalletType.TokenPocket,chainType:e.ChainPlatformType.eos,providerId:"TokenPocket",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-generic-logo.png"},{providerName:e.ExternalWalletType.WalletConnect,chainType:e.ChainPlatformType.ethereum,providerId:"walletconnect",requiresLogin:!1,supportsDiscovery:!0,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!1,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login.",sign:"",discover:"",versionsRequired:""},discoveryKeyLookupFunc:de,logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-walletconnect-logo.png"},{providerName:e.ExternalWalletType.Web3,chainType:e.ChainPlatformType.ethereum,providerId:"web3",requiresLogin:!1,supportsDiscovery:!0,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!1,requiresDiscoverToLogin:!1,helpText:{login:"This wallet doesn’t require you to login.",sign:"",discover:"",versionsRequired:""},discoveryKeyLookupFunc:de,logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-web3-logo.png"},{providerName:e.ExternalWalletType.WhaleVault,chainType:e.ChainPlatformType.eos,providerId:"whalevault",requiresLogin:!0,supportsDiscovery:!1,supportsSignArbitrary:!0,requiresLogoutLoginToDiscover:!0,requiresDiscoverToLogin:!1,helpText:{login:"Whalevault requires logging in through the Whalevault app.",sign:"",discover:"",versionsRequired:""},logoUrl:"https://storage.googleapis.com/oreid-files/partners/wallet-whalevault-logo.png"}];function he(e){return pe.find((function(t){return t.providerName===e.toString()}))}var fe=pe.map((function(e){return e.providerName})),ve=function(){function t(e){this._oreIdContext=e.oreIdContext,this._user=e.user,this.transitAccessContexts={}}return t.prototype.installTransitProviders=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return this._oreIdContext.transitProvidersInstalled=(e||[]).map((function(e){try{return e(null)}catch(e){return console.log("Couldn't initiate a wallet provider. ".concat(e)),null}})).filter((function(e){return e&&!0})).map((function(e){return(t=e.id,pe.find((function(e){return e.providerId===t}))).providerName;var t})),[2]}))}))},t.prototype.setupTransitWallet=function(t){var n=t.walletType,r=t.chainNetwork;return S(this,void 0,void 0,(function(){var t,o,i,s;return N(this,(function(a){switch(a.label){case 0:return this.assertHasProviderInstalled(n,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(n,r),t=he(n).providerId,[4,this.getOrCreateTransitAccessContext(r)];case 1:return o=a.sent(),i=o.getWalletProviders().find((function(e){return e.id===t})),[4,(s=o.initWallet(i)).connect()];case 2:return a.sent(),[4,this.waitWhileWalletIsBusy(s,n)];case 3:return a.sent(),[2,s]}}))}))},t.prototype.getChainNetworkNextworkConfig=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return[4,this._oreIdContext.getChainNetworkSettings(e)];case 1:if(!(t=a.sent()))throw new Error("Invalid chain network: ".concat(e,"."));return n=(null==t?void 0:t.hosts[0])||{},r=n.chainId,o=n.host,i=n.port,s=n.protocol,[2,{host:o,port:i,protocol:s,chainId:r}]}}))}))},t.prototype.getOrCreateTransitAccessContext=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,s,a,c;return N(this,(function(u){switch(u.label){case 0:return t=this._oreIdContext.options,n=t.appName,r=t.eosTransitWalletProviders,o=void 0===r?[]:r,this.transitAccessContexts[e]?[2,this.transitAccessContexts[e]]:[4,this.getChainNetworkNextworkConfig(e)];case 1:return s=u.sent(),[4,this.isNotEosNetwork(e)];case 2:return a=u.sent(),c=i.initAccessContext({appName:n||"missing appName",network:s,walletProviders:o,isNotEosNetwork:a}),this.transitAccessContexts[e]=c,[2,c]}}))}))},t.prototype.connectToTransitProvider=function(t){var n=t.walletType,r=t.chainNetwork,o=void 0===r?e.ChainNetwork.EosMain:r,i=t.chainAccount,s=void 0===i?null:i;return S(this,void 0,void 0,(function(){var t,r,i,a,c,u,l,d,p,h,f;return N(this,(function(v){switch(v.label){case 0:this.assertHasProviderInstalled(n,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(n,o),v.label=1;case 1:return v.trys.push([1,9,10,11]),[4,this.setupTransitWallet({walletType:n,chainNetwork:o})];case 2:return r=v.sent(),t={transitWallet:r},he(n).requiresLogin?r.authenticated?[3,4]:[4,this.loginToTransitProvider(r,n,o,s)]:[3,4];case 3:v.sent(),v.label=4;case 4:return r.connected?r.authenticated&&r.auth?[4,this.updateOreAccountPermissionsfromTransitWalletAuth(r,n)]:[3,6]:[3,7];case 5:v.sent(),i=r.auth,a=i.accountName,c=i.permission,u=i.publicKey,t={isLoggedIn:!0,chainAccount:a,permissions:[{name:c,publicKey:u}],transitWallet:r,provider:n},v.label=6;case 6:return[3,8];case 7:throw l="".concat(n," not connected!"),d=r.hasError,p=r.errorMessage,d&&(l+=" Error: ".concat(p)),new Error(l);case 8:return[3,11];case 9:throw h=v.sent(),f="Failed to connect to ".concat(n," on ").concat(o,". ").concat((null==h?void 0:h.message)||""),console.log("connectToTransitProvider:".concat(f),h),new Error(f);case 10:return this._oreIdContext.setIsBusy(!1),[7];case 11:return[2,t]}}))}))},t.prototype.doTransitProviderLogin=function(t,n,r,o,i){return void 0===i&&(i=0),S(this,void 0,void 0,(function(){var s,a,c,u;return N(this,(function(l){switch(l.label){case 0:return this.assertHasProviderInstalled(o,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(o,r),he(o).requiresDiscoverToLogin?[4,t.discover(this.discoverOptionsForProvider(o))]:[3,5];case 1:return a=l.sent(),(c=this.findAccountInDiscoverData(a,n))?[4,t.login(n,c.authorization)]:[3,3];case 2:return s=l.sent(),[3,4];case 3:throw new Error("Account ".concat(n," not found in wallet"));case 4:return[3,7];case 5:return[4,t.login(n)];case 6:s=l.sent(),l.label=7;case 7:return i>2?[2,null]:(u=((null==t?void 0:t.auth)||{}).accountName,n&&u!==n?[4,t.logout()]:[3,9]);case 8:l.sent(),this.doTransitProviderLogin(t,n,r,o,i+1),l.label=9;case 9:return[2,s]}}))}))},t.prototype.loginWithTransitProvider=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return t=e.provider,n=e.chainAccount,r=e.chainNetwork,o=W.mapAuthProviderToWalletType(t),[4,this.connectToTransitProvider({walletType:o,chainAccount:n,chainNetwork:r})];case 1:return i=a.sent(),(null==(s=null==i?void 0:i.transitWallet)?void 0:s.auth)?[3,4]:[4,this.loginToTransitProvider(s,t,r,n)];case 2:return a.sent(),[4,this.updateOreAccountPermissionsfromTransitWalletAuth(s,t)];case 3:a.sent(),a.label=4;case 4:return[2,i]}}))}))},t.prototype.loginToTransitProvider=function(t,n,r,o){return void 0===o&&(o=null),S(this,void 0,void 0,(function(){var i,s;return N(this,(function(a){switch(a.label){case 0:this.assertHasProviderInstalled(n,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(n,r),a.label=1;case 1:return a.trys.push([1,3,4,6]),[4,this.doTransitProviderLogin(t,o,r,n)];case 2:return a.sent(),[3,6];case 3:throw i=a.sent(),s=i.message,(void 0===s?"":s).includes("unknown key (boost::tuples::tuple")?new Error("The account selected by the wallet for login isn't on the ".concat(r," chain")):i;case 4:return[4,this.waitWhileWalletIsBusy(t,n)];case 5:return a.sent(),[7];case 6:return[2]}}))}))},t.prototype.assertHasProviderInstalled=function(t,n){if(n===e.ExternalWalletInterface.Transit&&!this.hasTransitProvider(t))throw Error('Transit provider:"'.concat(t,'" not installed. Please pass it in via eosTransitWalletProviders.'))},t.prototype.discoverWithTransit=function(t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:return n=t.walletType,r=t.chainNetwork,o=void 0===r?e.ChainNetwork.EosMain:r,i=t.oreAccount,s=t.discoveryPathIndexList,this.assertProviderValidForChainNetwork(n,o),a=null,this.canDiscover(n)?[4,this.discoverCredentialsInTransitWallet(o,n,i,s)]:[3,2];case 1:return a=u.sent(),[3,7];case 2:return[4,this.setupTransitWallet({walletType:n,chainNetwork:o})];case 3:return c=u.sent(),this.requiresLogoutLoginToDiscover(n)?[4,c.logout()]:[3,6];case 4:return u.sent(),[4,c.login()];case 5:return u.sent(),this.updateOreAccountPermissionsfromTransitWalletAuth(c,n),[3,7];case 6:console.log("Discover not working for walletType: ",n),u.label=7;case 7:return[2,a]}}))}))},t.prototype.discoverCredentialsInTransitWallet=function(e,t,n,r){return S(this,void 0,void 0,(function(){var n,o,i,s,a=this;return N(this,(function(c){switch(c.label){case 0:n=[],c.label=1;case 1:return c.trys.push([1,,5,6]),[4,this.setupTransitWallet({walletType:t,chainNetwork:e})];case 2:return o=c.sent(),this._oreIdContext.setIsBusy(!0),[4,o.discover(this.discoverOptionsForProvider(t,r))];case 3:return i=c.sent(),s=i.keyToAccountMap,[4,W.asyncForEach(s,(function(e){return S(a,void 0,void 0,(function(){var r,i,s,a,c,u,l,d,p,h;return N(this,(function(f){switch(f.label){case 0:return r=e.accounts,i=void 0===r?[]:r,s=e.key,i.length>0&&s?(a=x(i,1),c=a[0],u=c.account,l=c.authorization,d=[{account:u,publicKey:s,name:l,parent:null}],[4,this.getChainNetworkFromTransitWallet(o)]):[3,3];case 1:return p=f.sent(),[4,null===(h=this._user)||void 0===h?void 0:h.addWalletPermissionsToOreIdAccount({chainAccount:u,chainNetwork:p,permissions:d,walletType:t})];case 2:f.sent(),n=n.concat(d),f.label=3;case 3:return[2]}}))}))}))];case 4:return c.sent(),[3,6];case 5:return this._oreIdContext.setIsBusy(!1),[7];case 6:return[2,n]}}))}))},t.prototype.discoverOptionsForProvider=function(e,t){var n,r;void 0===t&&(t=null);var o=W.mapAuthProviderToWalletType(e);if(this.hasTransitProvider(o)){var i=he(W.mapAuthProviderToWalletType(e)),s=i.defaultDiscoveryPathIndexList;n=t||s||[],r=i.discoveryKeyLookupFunc}var a={pathIndexList:n};return r&&(a.keyLookupFunc=r),a},t.prototype.findAccountInDiscoverData=function(e,t){var n=e.keyToAccountMap.find((function(e){return e.accounts.find((function(e){return e.account===t}))}));if(n){var r="active";if(!n.accounts.find((function(e){return"active"===e.authorization}))){var o=x(n.accounts,1)[0];o&&(r=o.authorization)}return{index:n.index,key:n.key,authorization:r}}return null},t.prototype.signWithTransitProvider=function(t,n){return S(this,void 0,void 0,(function(){var r,o,i,s,a,c,u;return N(this,(function(l){switch(l.label){case 0:return o=t.chainNetwork,i=t.chainAccount,s=W.mapAuthProviderToWalletType(n),this.assertHasProviderInstalled(s,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(s,o),[4,this.connectToTransitProvider({walletType:s,chainNetwork:o,chainAccount:i})];case 1:a=l.sent().transitWallet,l.label=2;case 2:return l.trys.push([2,10,11,12]),this._oreIdContext.setIsBusy(!0),(c=he(s).chainType)!==e.ChainPlatformType.eos?[3,4]:[4,this.signTransactionWithTransitAndEosSDK(t,a)];case 3:return r=l.sent(),[3,9];case 4:return c!==e.ChainPlatformType.algorand?[3,6]:[4,this.signTransactionWithTransitAndAlgorandSDK(t,a)];case 5:return r=l.sent(),[3,9];case 6:return c!==e.ChainPlatformType.ethereum?[3,8]:[4,this.signTransactionWithTransitAndEthereumSDK(t,a)];case 7:return r=l.sent(),[3,9];case 8:throw new Error("signWithTransitProvider doesnt support chain type: ".concat(c));case 9:return[3,12];case 10:throw u=l.sent(),console.error(u),u;case 11:return this._oreIdContext.setIsBusy(!1),[7];case 12:return r.serializedTransaction&&(r.serializedTransaction=Buffer.from(r.serializedTransaction)),[2,{signedTransaction:r}]}}))}))},t.prototype.signStringWithTransitProvider=function(t){var n=t.walletType,r=t.chainNetwork,o=t.string,i=t.message;return S(this,void 0,void 0,(function(){var t,s;return N(this,(function(a){switch(a.label){case 0:return this.assertHasProviderInstalled(n,e.ExternalWalletInterface.Transit),this.assertProviderValidForChainNetwork(n,r),[4,this.connectToTransitProvider({walletType:n,chainNetwork:r})];case 1:t=a.sent().transitWallet,a.label=2;case 2:return a.trys.push([2,4,5,6]),this._oreIdContext.setIsBusy(!0),[4,t.signArbitrary(o,i)];case 3:return[2,{signedString:a.sent()}];case 4:throw s=a.sent(),console.error(s),s;case 5:return this._oreIdContext.setIsBusy(!1),[7];case 6:return[2]}}))}))},t.prototype.signTransactionWithTransitAndEosSDK=function(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a;return N(this,(function(c){switch(c.label){case 0:return n=e.expireSeconds,r=e.transaction,o=((null==e?void 0:e.signOptions)||{}).broadcast,[4,t.eosApi.transact({actions:[r]},{broadcast:o,blocksBehind:3,expireSeconds:n||60})];case 1:return i=c.sent(),s=i.signatures,a=i.serializedTransaction,[4,this.callDiscoverAfterSign(e)];case 2:return c.sent(),[2,{signatures:s,serializedTransaction:a}]}}))}))},t.prototype.signTransactionWithTransitAndAlgorandSDK=function(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:return n=e.chainNetwork,r=e.transaction,[4,this.getChainNetworkNextworkConfig(n)];case 1:return o=u.sent(),i={chainId:o.chainId,requiredKeys:null,serializedTransaction:le(r),abis:null},[4,t.provider.signatureProvider.sign(i)];case 2:return s=u.sent(),a=s.signatures,c=s.serializedTransaction,[4,this.callDiscoverAfterSign(e)];case 3:return u.sent(),[2,{signatures:a,serializedTransaction:c}]}}))}))},t.prototype.signTransactionWithTransitAndEthereumSDK=function(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:return n=e.chainNetwork,r=e.transaction,[4,this.getChainNetworkNextworkConfig(n)];case 1:return o=u.sent(),i={chainId:o.chainId,requiredKeys:null,serializedTransaction:le(r),abis:null},[4,t.provider.signatureProvider.sign(i)];case 2:return s=u.sent(),a=s.signatures,c=s.serializedTransaction,[4,this.callDiscoverAfterSign(e)];case 3:return u.sent(),[2,{signatures:a,serializedTransaction:c}]}}))}))},t.prototype.getChainNetworkFromTransitWallet=function(e){var t,n;return S(this,void 0,void 0,(function(){var r,o;return N(this,(function(i){switch(i.label){case 0:return(r=((null===(t=null==e?void 0:e.ctx)||void 0===t?void 0:t.network)||{}).chainId)?[4,this._oreIdContext.getAllChainNetworkSettings()]:[2,null];case 1:return o=i.sent(),[2,null===(n=o.find((function(e){return e.hosts.find((function(e){return e.chainId===r}))})))||void 0===n?void 0:n.network]}}))}))},t.prototype.updateOreAccountPermissionsfromTransitWalletAuth=function(e,t){var n;return S(this,void 0,void 0,(function(){var r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:return(null==e?void 0:e.connected)&&(null==e?void 0:e.auth)?(r=e.auth,o=r.accountName,i=r.permission,s=r.publicKey,o&&i&&s?(a=[{name:i,publicKey:s}],[4,this.getChainNetworkFromTransitWallet(e)]):[2]):[2];case 1:return(c=u.sent())?[4,null===(n=this._user)||void 0===n?void 0:n.updatePermissionsIfNecessary({chainAccount:o,chainNetwork:c,permissions:a,walletType:t})]:[3,3];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))},t.prototype.isTransitProvider=function(e){var t=W.mapAuthProviderToWalletType(e);return!!t&&fe.includes(t)},t.prototype.hasTransitProvider=function(e){return this._oreIdContext.transitProvidersInstalled.includes(e)},t.prototype.assertProviderValidForChainNetwork=function(e,t){return S(this,void 0,void 0,(function(){var n,r;return N(this,(function(o){switch(o.label){case 0:return n=he(e).chainType,[4,this._oreIdContext.getAllChainNetworkSettings()];case 1:if(r=o.sent(),!!!r.find((function(e){return e.network===t&&e.type===n})))throw Error("External Wallet Type: ".concat(e," doesnt support chainNetwork ").concat(t,". Hint: It supports networks of type ").concat(n,"."));return[2]}}))}))},t.prototype.waitWhileWalletIsBusy=function(e,t){return S(this,void 0,void 0,(function(){return N(this,(function(n){switch(n.label){case 0:return e.inProgress?(this._oreIdContext.setIsBusy(!0),[4,W.sleep(250)]):[3,2];case 1:return n.sent(),console.log("connecting to ".concat(t," via eos-transit wallet in progress:"),e.inProgress),[3,0];case 2:return this._oreIdContext.setIsBusy(!1),[2]}}))}))},t.prototype.discover=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return[2,this.discoverWithTransit(e)]}))}))},t.prototype.callDiscoverAfterSign=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i;return N(this,(function(s){switch(s.label){case 0:return t=e.chainNetwork,n=e.account,r=((null==e?void 0:e.signOptions)||{}).provider,o=W.mapAuthProviderToWalletType(r),i={walletType:o,chainNetwork:t,oreAccount:n},[4,this.discover(i)];case 1:return s.sent(),[2]}}))}))},t.prototype.isNotEosNetwork=function(t){return S(this,void 0,void 0,(function(){var n;return N(this,(function(r){switch(r.label){case 0:return[4,this._oreIdContext.getChainNetworkSettings(t)];case 1:return[2,!((n=r.sent()).type===e.ChainPlatformType.eos||n.type===e.ChainPlatformType.ore)]}}))}))},t.prototype.canDiscover=function(e){return!!this.hasTransitProvider(e)&&he(e).supportsDiscovery},t.prototype.canSignString=function(e){return!!this.hasTransitProvider(e)&&he(e).supportsSignArbitrary},t.prototype.requiresDiscoverToLogin=function(e){return!!this.hasTransitProvider(e)&&he(e).requiresDiscoverToLogin},t.prototype.requiresLogoutLoginToDiscover=function(e){return!!this.hasTransitProvider(e)&&he(e).requiresLogoutLoginToDiscover},t.prototype.defaultDiscoveryPathIndexList=function(e){var t;return this.hasTransitProvider(e)?null===(t=he(e))||void 0===t?void 0:t.defaultDiscoveryPathIndexList:null},t.prototype.helpTextForProvider=function(e){return this.hasTransitProvider(e)?he(e).helpText:null},t}(),ge=function(){function e(){this._subscribers=[]}return e.prototype.subscribe=function(e){var t=this._subscribers.find((function(t){return t===e}));e&&!t&&(e(this),this._subscribers.push(e))},e.prototype.unsubscribe=function(e){this._subscribers=this._subscribers.filter((function(t){return t!==e}))},e.prototype.callSubscribers=function(){var e=this;this._subscribers.forEach((function(t){return t(e)}))},e}(),ye=W.isNullOrEmpty,Te=function(t){function n(e){var n=t.call(this)||this;return n.onUpdateAccessTokenHelper=function(e){t.prototype.callSubscribers.call(n)},n._oreIdContext=e.oreIdContext,n._accessTokenHelper=e.accessTokenHelper,n._accountName=e.accountName,n._accessTokenHelper.subscribe(n.onUpdateAccessTokenHelper),n}return y(n,t),Object.defineProperty(n.prototype,"accessToken",{get:function(){return this._accessTokenHelper.accessToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"accountName",{get:function(){return this._accountName},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){this.assertUserHasData();var e=this._userSourceData;e.permissions;var t=E(e,["permissions"]);return P(P({},t),{chainAccounts:this.getChainAccounts()})},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasData",{get:function(){return!ye(null==this?void 0:this._userSourceData)},enumerable:!1,configurable:!0}),n.prototype.setUserSourceData=function(e){this._userSourceData=e,t.prototype.callSubscribers.call(this)},n.prototype.getChainAccounts=function(){var e=this;this.assertUserHasData();var t=(this._userSourceData.permissions||[]).map((function(t){var n=x(e.getDefaultPermissionForChainAccount(t.chainAccount,t.chainNetwork),1)[0];return{chainAccount:t.chainAccount,chainNetwork:t.chainNetwork,defaultPermission:n,permissions:e.getPermissionForChainAccount(t.chainAccount,t.chainNetwork)}}));return W.getUniqueValues(t)},Object.defineProperty(n.prototype,"isLoggedIn",{get:function(){return!!this.accessToken},enumerable:!1,configurable:!0}),n.prototype.assertUserHasData=function(){if(!this.hasData)throw new Error("User data hasnt been retrieved. Call user.getData() first.")},n.prototype.assertUserHasValidEmail=function(){this.assertUserHasData();var e=((null==this?void 0:this.data)||{}).email;if(!W.isValidEmail(e))throw new Error("User doesnt have a valid email")},n.prototype.getData=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return N(this,(function(o){switch(o.label){case 0:if(this.hasData&&!e)return[2,this.data];if(!this.accessToken)throw new Error("AccessToken is missing or has expired");return t=null==this?void 0:this._accountName,n={account:t},[4,J(this._oreIdContext,n)];case 1:return r=o.sent(),this._accountName=t,this.setUserSourceData(r),[2,this.data]}}))}))},n.prototype.logout=function(){this._oreIdContext.logout()},n.prototype.getNewChainAccountUrl=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u,l,d;return N(this,(function(p){switch(p.label){case 0:return n=(t=e||{}).account,r=t.accountType,o=t.chainNetwork,i=t.accountOptions,s=t.provider,a=t.state,c=this._oreIdContext.options,u=c.newAccountCallbackUrl,l=c.backgroundColor,d={account:n,accountType:r,backgroundColor:l,chainNetwork:o,accountOptions:i,provider:s,callbackUrl:u,state:a},[4,ae(this._oreIdContext,d)];case 1:return[2,{newAccountUrl:p.sent(),errors:null}]}}))}))},n.prototype.sendVerificationCodeToEmail=function(){var t;return S(this,void 0,void 0,(function(){return N(this,(function(n){switch(n.label){case 0:return this.assertUserHasValidEmail(),[4,Z(this._oreIdContext,{email:null===(t=null==this?void 0:this.data)||void 0===t?void 0:t.email,provider:e.AuthProvider.Email})];case 1:return[2,n.sent()]}}))}))},n.prototype.checkVerificationCodeForEmail=function(t){var n,r=t.code;return S(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return this.assertUserHasValidEmail(),[4,$(this._oreIdContext,{code:r,email:null===(n=null==this?void 0:this.data)||void 0===n?void 0:n.email,provider:e.AuthProvider.Email})];case 1:return[2,t.sent()]}}))}))},n.prototype.mapUserPermission=function(e){if(ye(e))return null;e.chainNetwork,e.chainAccount;var t=e.permission,n=E(e,["chainNetwork","chainAccount","permission"]);return P(P({},n),{name:t})},n.prototype.getPermissionForChainAccount=function(e,t){return this._userSourceData.permissions.filter((function(n){return n.chainAccount===e&&n.chainNetwork===t})).map(this.mapUserPermission)},n.prototype.getDefaultPermissionForChainAccount=function(e,t){var n=this.getPermissionForChainAccount(e,t),r=n.filter((function(e){return!0===e.isDefault}));return ye(r)&&1===(null==n?void 0:n.length)&&(r=n),r},n.prototype.updatePermissionsIfNecessary=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.addWalletPermissionsToOreIdAccount(e)];case 1:return t.sent(),[2]}}))}))},n.prototype.addWalletPermissionsToOreIdAccount=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i=this;return N(this,(function(s){switch(s.label){case 0:return t=e.chainAccount,n=e.chainNetwork,r=e.permissions,o=e.walletType,!this.accountName||ye(r)||ye(n)?[2]:[4,this.getData()];case 1:return s.sent(),[4,W.asyncForEach(r,(function(e){return S(i,void 0,void 0,(function(){var r,i,s;return N(this,(function(a){switch(a.label){case 0:return r=e.name,(i=e.parent)||(i="active","owner"===r?i="":"active"===r&&(i="owner")),!0===this._userSourceData.permissions.some((function(e){return e.chainAccount===t&&e.chainNetwork===n&&e.permission===r||"owner"===r}))?[3,2]:(s=e.publicKey,[4,H(this._oreIdContext,{account:this.accountName,chainAccount:t,chainNetwork:n,publicKey:s,parentPermission:i,permission:r,provider:o})]);case 1:a.sent(),a.label=2;case 2:return[2]}}))}))}))];case 2:return s.sent(),[4,this.getData()];case 3:return s.sent(),[2]}}))}))},n}(ge),we=function(e){function t(t,n){void 0===n&&(n=!1);var r=e.call(this)||this;return r._ignoreIssuer=n,r.setAccessToken(t),r}return y(t,e),Object.defineProperty(t.prototype,"accessToken",{get:function(){return this._accessToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decodedAccessToken",{get:function(){return this.accessToken?this._decodedAccessToken:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idToken",{get:function(){return this._idToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"decodedIdToken",{get:function(){return this._decodedIdToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accountName",{get:function(){return this.accessToken?(t.assertIsTokenValid(this.decodedAccessToken),W.getClaimFromJwtTokenBySearchString(this.decodedAccessToken,"https://oreid.aikon.com/account")):null},enumerable:!1,configurable:!0}),t.prototype.clearAccessToken=function(){this.setAccessToken(null)},t.prototype.clearIdToken=function(){this.setIdToken(null)},t.prototype.hasExpired=function(e){return!this._decodedAccessToken||!t.isTokenDateValidNow(this._decodedAccessToken,e)},t.prototype.setAccessToken=function(n){var r=this;if(n){var o=W.jwtDecodeSafe(n);if(!o)throw Error("Can't set accessToken. Value provided: ".concat(n));t.assertIsTokenValid(o,this._ignoreIssuer),t.assertIdTokenMatchesAccessToken(o,this.decodedIdToken),this._decodedAccessToken=o,this._accessToken=n,W.runAtTime((function(){r.clearAccessToken(),console.log("accessToken has expired and has been cleared")}),1e3*this._decodedAccessToken.exp)}else this._accessToken=null;e.prototype.callSubscribers.call(this)},t.prototype.setIdToken=function(n){var r=this;if(n){var o=W.jwtDecodeSafe(n);if(!o)throw Error("Can't set IdToken. Value provided: ".concat(n));t.assertIsTokenValid(o,this._ignoreIssuer),t.assertIdTokenMatchesAccessToken(this.decodedAccessToken,o),this._decodedIdToken=o,this._idToken=n,W.runAtTime((function(){r.clearIdToken(),console.log("idToken has expired and has been cleared")}),1e3*this._decodedIdToken.exp)}else this._decodedIdToken=null;e.prototype.callSubscribers.call(this)},t.prototype.assertHasAccessToken=function(){if(!this.accessToken)throw Error("AccessToken not set. Login first.")},t.isTokenValid=function(e,n){void 0===n&&(n=!1);try{return t.assertIsTokenValid(e,n),!0}catch(e){return!1}},t.assertIsTokenValid=function(e,n){void 0===n&&(n=!1);var r=new Date;if(!e)throw Error("JWT (access or id) token is invalid, or expired)");if(!n&&!e.iss.includes("oreid.io"))throw Error("Access token not issued by ORE ID");if(!t.isTokenDateValidNow(e,r))throw Error("Access token has expired")},t.assertIdTokenMatchesAccessToken=function(e,t){if(e&&t){if(e.iss!==t.iss)throw Error("AccessToken and IdToken mismatch - not issued by the same issuer");if(e.sub!==t.sub)throw Error("AccessToken and IdToken mismatch - not for the same user")}},t.isTokenDateValidNow=function(e,t){var n=(t||new Date).getTime()/1e3;return!(void 0!==e.exp&&(null==e?void 0:e.exp)<n)&&!(void 0!==(null==e?void 0:e.nbf)&&(null==e?void 0:e.nbf)>n)},t}(ge),me=function(e){function t(t){var n=e.call(this)||this;return n.onUpdateAccessTokenHelper=function(e){n.saveAccessTokenAndNotifySubscribers(n._accessTokenHelper.accessToken)},n._oreIdContext=t.oreIdContext,n._localState=n._oreIdContext.localState,n._transitHelper=new ve({oreIdContext:n._oreIdContext,user:n._user}),n.initAccessTokenHelper(),n}return y(t,e),Object.defineProperty(t.prototype,"accessTokenHelper",{get:function(){return this._accessTokenHelper},enumerable:!1,configurable:!0}),t.prototype.initAccessTokenHelper=function(){var e;this._accessTokenHelper=new we;var t=null===(e=this._localState)||void 0===e?void 0:e.accessToken;this.accessToken=t,this.saveAccessTokenAndNotifySubscribers(t),this._accessTokenHelper.subscribe(this.onUpdateAccessTokenHelper)},Object.defineProperty(t.prototype,"accountName",{get:function(){var e,t;return(null===(e=this._accessTokenHelper)||void 0===e?void 0:e.accessToken)?null===(t=this._accessTokenHelper)||void 0===t?void 0:t.accountName:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"idToken",{get:function(){var e;return null===(e=this._accessTokenHelper)||void 0===e?void 0:e.idToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessToken",{get:function(){var e;return null===(e=this._accessTokenHelper)||void 0===e?void 0:e.accessToken},set:function(e){try{this._accessTokenHelper.setAccessToken(e)}catch(e){console.log("Cant set accessToken.",e.message)}},enumerable:!1,configurable:!0}),t.prototype.saveAccessTokenAndNotifySubscribers=function(t){var n;(null===(n=this._localState)||void 0===n?void 0:n.accessToken)!==t&&(this._localState.saveAccessToken(t),this._user=null),e.prototype.callSubscribers.call(this)},Object.defineProperty(t.prototype,"user",{get:function(){return this._user||(this._user=new Te({oreIdContext:this._oreIdContext,accessTokenHelper:this._accessTokenHelper,accountName:this.accountName})),this._user},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoggedIn",{get:function(){return!!this.accessToken},enumerable:!1,configurable:!0}),t.prototype.clearAccessToken=function(){this._localState.clearAccessToken(),this._accessTokenHelper.clearAccessToken(),e.prototype.callSubscribers.call(this)},t.prototype.connectWithWallet=function(e){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){if(t=e.provider,!this._transitHelper.isTransitProvider(t)||re.includes(t))throw new Error("loginWithWallet not supprted for provider: ".concat(t));return[2,this.connectToWalletProvider(e)]}))}))},t.prototype.connectToWalletProvider=function(e){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){if(t=e.provider,this._transitHelper.isTransitProvider(t))return[2,this._transitHelper.loginWithTransitProvider(e)];throw new Error("Not a valid External Wallet provider: ".concat(t))}))}))},t.prototype.convertOauthTokens=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return[2,M(this._oreIdContext,e)]}))}))},t.prototype.loginWithToken=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o;return N(this,(function(i){switch(i.label){case 0:if(!(null==e?void 0:e.idToken)&&!(null==e?void 0:e.accessToken))throw new Error("Cant loginWithToken - missing required parameter: accessToken OR idToken");return[4,this.loginWithJwtToken(e)];case 1:return t=i.sent(),n=t.accessToken,r=t.error,o=t.processId,r||(this.accessToken=n,this.user.getData()),[2,{accessToken:n,errors:r,processId:o}]}}))}))},t.prototype.newUserWithToken=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i;return N(this,(function(s){switch(s.label){case 0:if(!(t=(e||{}).idToken))throw new Error("Cant do newUserWithToken - missing required parameter: idToken");return[4,this.newAccountWithIdToken({idToken:t})];case 1:return n=s.sent(),r=n.accessToken,o=n.error,i=n.processId,o||(this.accessToken=r,this.user.getData()),[2,{accessToken:r,errors:o,processId:i}]}}))}))},t.prototype.checkJwtTokenAndReturnError=function(e){try{new we(e,!0)}catch(e){return{error:"token_invalid",message:"token invalid or corrupt - must be a JWT Oauth2 token"}}return null},t.prototype.loginWithJwtToken=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o;return N(this,(function(i){switch(i.label){case 0:return t=e.accessToken,n=e.idToken,(r=t?this.checkJwtTokenAndReturnError(t):null)?[2,P({accessToken:null},r)]:(r=n?this.checkJwtTokenAndReturnError(n):null)?[2,P({accessToken:null},r)]:[4,G(this._oreIdContext,e)];case 1:return(null==(o=i.sent())?void 0:o.errorCode)||this.setAuthResult({accessToken:null==o?void 0:o.accessToken}),[2,{accessToken:o.accessToken,error:null==o?void 0:o.errorCode,message:null==o?void 0:o.errorMessage,processId:null==o?void 0:o.processId}]}}))}))},t.prototype.newAccountWithIdToken=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return N(this,(function(o){switch(o.label){case 0:return t=e.idToken,(n=t?this.checkJwtTokenAndReturnError(t):null)?[2,P({accessToken:null},n)]:[4,Y(this._oreIdContext,e)];case 1:return(null==(r=o.sent())?void 0:r.errorCode)||this.setAuthResult({accessToken:null==r?void 0:r.accessToken}),[2,{accessToken:r.accessToken,error:null==r?void 0:r.errorCode,message:null==r?void 0:r.errorMessage,processId:null==r?void 0:r.processId}]}}))}))},t.prototype.logout=function(){this.clearAccessToken(),this._user=null},t.prototype.getLoginUrl=function(e){return S(this,void 0,void 0,(function(){var t,n,r,o,i,s,a,c,u,l,d,p,h,f;return N(this,(function(v){switch(v.label){case 0:return n=(t=e||{}).code,r=t.email,o=t.idToken,i=t.phone,s=t.provider,a=t.state,c=t.linkToAccount,u=t.returnAccessToken,l=t.returnIdToken,d=this._oreIdContext.options,p=d.authCallbackUrl,h=d.backgroundColor,f={code:n,email:r,idToken:o,phone:i,provider:s,backgroundColor:h,callbackUrl:p,state:a,linkToAccount:c,returnAccessToken:!!W.isNullOrEmpty(u)||u,returnIdToken:l},[4,ce(this._oreIdContext,f)];case 1:return[2,{loginUrl:v.sent(),errors:null}]}}))}))},t.prototype.handleAuthCallback=function(e){var t=W.extractDataFromCallbackUrl(e),n=t.access_token,r=t.account,o=t.id_token,i=t.errors,s=t.process_id,a=t.state,c={account:r};return i&&(c.errors=i),s&&(c.processId=s),a&&(c.state=a),n&&(c.accessToken=n),o&&(c.idToken=o),i||this.setAuthResult(c),this._oreIdContext.setIsBusy(!1),c},t.prototype.setAuthResult=function(e){var t=e.accessToken,n=e.idToken;if(!t)throw Error("Cant setAuthResult. accessToken is missing");n&&this._accessTokenHelper.setIdToken(null),this.accessToken=t,n&&this._accessTokenHelper.setIdToken(n)},t}(ge),ke=function(){function t(e){this._oreIdContext=e.oreIdContext,this._user=e.user,this.assertValidTransactionAndSetData(e.data),this._transitHelper=new ve({oreIdContext:this._oreIdContext,user:this._user})}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),t.prototype.assertValidTransactionAndSetData=function(e){var t=e||{},n=t.chainNetwork,r=t.transaction,o=t.signedTransaction,i=[],s=[];if(!this._user||!this._user.hasData)throw new Error("Make sure that a user has been authenticated and that youve called user.getData()");if(n||i.push("chainNetwork"),r||o||i.push("transaction OR signedTransaction"),this._user.accountName||s.push("Transaction Data error - Expecting a user.accountName - is the user logged-in in?"),r&&o&&s.push("Only provide one: transaction OR signedTransaction"),!W.isNullOrEmpty(i))throw new Error("Transaction parameter(s) missing: ".concat(i.join(", ")));if(!W.isNullOrEmpty(s))throw new Error("Transaction parameter error: ".concat(s.join(", ")));this.setTransactionData(e)},t.prototype.setTransactionData=function(e){this._data=P({account:this._user.accountName},e),(null==e?void 0:e.transaction)&&(this._data.encodedTransaction=W.base64Encode(JSON.stringify(e.transaction))),(null==e?void 0:e.signedTransaction)&&(this._data.encodedSignedTransaction=W.base64Encode(JSON.stringify(e.signedTransaction)))},t.prototype.assertTransactionAccountValidForUser=function(){var e,t,n,r,o,i,s=this._data,a=s.chainAccount,c=s.chainNetwork,u=this._user.accountName,l=null===(n=null===(t=null===(e=this._user)||void 0===e?void 0:e.data)||void 0===t?void 0:t.chainAccounts)||void 0===n?void 0:n.find((function(e){return e.chainNetwork===c&&e.chainAccount===a})),d=null===(r=null==l?void 0:l.permissions)||void 0===r?void 0:r.every((function(e){return!0===e.privateKeyStoredExterally})),p=null===(i=null===(o=null==l?void 0:l.permissions)||void 0===o?void 0:o.find((function(e){return!0===e.privateKeyStoredExterally})))||void 0===i?void 0:i.externalWalletType;if(!l)throw new Error("Can't find a chainAccount: ".concat(a," for chainNetwork: ").concat(c," in user's oreId account: ").concat(u));if(d)throw new Error("ChainAccount: ".concat(a," for chainNetwork: ").concat(c," appears to be in a wallet app (type: ").concat(p,") - use signWithWallet() to sign"))},t.prototype.validate=function(){return S(this,void 0,void 0,(function(){return N(this,(function(e){throw new Error("Not Implemented")}))}))},t.prototype.getSignUrl=function(){return S(this,void 0,void 0,(function(){var e,t;return N(this,(function(n){switch(n.label){case 0:return this.assertTransactionAccountValidForUser(),e=this.data,t=this._oreIdContext.options.signCallbackUrl,(null==e?void 0:e.signOptions)||(e.signOptions={}),e.signOptions.callbackUrl=t,[4,ue(this._oreIdContext,e)];case 1:return[2,{signUrl:n.sent(),errors:null}]}}))}))},t.prototype.checkCanAutoSign=function(){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),U(this._oreIdContext,e.ApiKeyUsedFor.AutoSigning,""),[4,K(this._oreIdContext,this._data)];case 1:return t=n.sent().autoSignCredentialsExist,[3,3];case 2:return n.sent(),[2,!1];case 3:return[2,t]}}))}))},t.prototype.autoSign=function(){return S(this,void 0,void 0,(function(){var e,t,n,r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return this.assertTransactionAccountValidForUser(),e=this.data,[4,ee(this._oreIdContext,{transactionData:e,autoSign:!0})];case 1:if(t=a.sent(),n=t.processId,r=t.signedTransaction,o=t.transactionId,i=t.errorCode,s=t.errorMessage,i||s)throw new Error(s);return[2,{processId:n,signedTransaction:r,transactionId:o}]}}))}))},t.prototype.signWithPassword=function(e,t){return S(this,void 0,void 0,(function(){var n,r,o,i,s,a,c;return N(this,(function(u){switch(u.label){case 0:if(this.assertTransactionAccountValidForUser(),(null==(n=this.data)?void 0:n.signOptions)||(n.signOptions={}),e&&(n.signOptions.userPassword=e),t&&(n.signOptions.userPasswordEncrypted=t),n.signOptions.userPassword&&n.signOptions.userPasswordEncrypted)throw new Error("Provide either a userPassword OR userPasswordEncrypted param. Both were provided.");return[4,te(this._oreIdContext,{transactionData:n,autoSign:!1})];case 1:if(r=u.sent(),o=r.processId,i=r.signedTransaction,s=r.transactionId,a=r.errorCode,c=r.errorMessage,a||c)throw new Error(c);return[2,{processId:o,signedTransaction:i,transactionId:s}]}}))}))},t.prototype.signWithWallet=function(t){return S(this,void 0,void 0,(function(){var n,r,o,i,s;return N(this,(function(a){switch(a.label){case 0:return n=this.data,this._transitHelper.isTransitProvider(t)?(r=this._transitHelper.signWithTransitProvider(n,t),o=W.toEnumValue(e.AuthProvider,t),i=n.account,s=n.chainNetwork,[4,this._transitHelper.callDiscoverAfterSign({account:i,chainNetwork:s,signOptions:{provider:o}})]):[2,null];case 1:return a.sent(),[2,r]}}))}))},t}();function be(e,t){return f.default(t,e).toString()}function Ae(e,t,n){var r;return S(this,void 0,void 0,(function(){var o,i,s;return N(this,(function(a){switch(a.label){case 0:if(!e&&W.isNullOrEmpty(t))throw new Error("Cant generate hmac. apiKey missing or empty - its required if not using a proxy server");if(!e)return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,h.default.post("/oreid/hmac",JSON.stringify({data:n}),{headers:{"Content-Type":"application/json"}})];case 2:return i=a.sent(),o=null===(r=null==i?void 0:i.data)||void 0===r?void 0:r.hmac,[3,4];case 3:throw s=a.sent(),this.getErrorFromAxiosError(s);case 4:return[3,6];case 5:o=be(t,n),a.label=6;case 6:return[2,o]}}))}))}function Ie(e,t,n){return S(this,void 0,void 0,(function(){var r,o;return N(this,(function(i){switch(i.label){case 0:if(W.isNullOrEmpty(n))throw new Error("Cant generate hmac. url missing or empty");return[4,Ae(e,t,n)];case 1:return r=i.sent(),o=encodeURIComponent(r),n.includes("&hmac=".concat(o))?[2,n]:[2,"".concat(n,"&hmac=").concat(o)]}}))}))}var _e=function(){function e(e,t){this.appId=e,this.cachedaccessToken=null,this.cachedUser=null,this.storage=t}return e.prototype.accessTokenKey=function(){return"oreid.".concat(this.appId,".accessToken")},Object.defineProperty(e.prototype,"accessToken",{get:function(){return this.cachedaccessToken||this.loadAccessToken(),this.cachedaccessToken},enumerable:!1,configurable:!0}),e.prototype.loadAccessToken=function(){this.cachedaccessToken=this.storage.getItem(this.accessTokenKey())},e.prototype.saveAccessToken=function(e){e?(this.cachedaccessToken=e,this.storage.setItem(this.accessTokenKey(),e)):this.clearAccessToken()},e.prototype.clearAccessToken=function(){this.cachedaccessToken=null,this.storage.removeItem(this.accessTokenKey())},e.prototype.clear=function(){this.clearAccessToken()},e}(),Ce=function(){function e(){}return e.prototype.getItem=function(e){return v.default.get(e)},e.prototype.removeItem=function(e){v.default.remove(e)},e.prototype.setItem=function(e,t,n){var r=P({expires:1},n);return v.default.set(e,t,r)},e}(),Pe=function(){function e(){window?this.storage=window.localStorage:W.log("Not running in Browser. Using CookieStorage instead.")}return e.prototype.getItem=function(e){return this.storage?this.storage.getItem(e):null},e.prototype.removeItem=function(e){this.storage&&this.storage.removeItem(e)},e.prototype.setItem=function(e,t,n){this.storage&&this.storage.setItem(e,t)},e}(),Ee=function(){function e(){}return e.prototype.getItem=function(e){return null},e.prototype.removeItem=function(e){},e.prototype.setItem=function(e,t,n){},e}(),Se=function(){function e(){this.memoryCache={}}return e.prototype.getItem=function(e){return e in this.memoryCache?this.memoryCache[e]:null},e.prototype.removeItem=function(e){this.getItem(e)&&delete this.memoryCache[e]},e.prototype.setItem=function(e,t,n){this.memoryCache[e]=t},e}(),Ne=function(){function e(e){if(void 0===e&&(e={tryLocalStorageFirst:!0}),this.triedLocalStorage=!1,this.triedCookieStorage=!1,!0===e.tryLocalStorageFirst){this.triedLocalStorage=!0;try{var t=new Pe;t&&t.storage&&(this.storage=t)}catch(t){W.log("Cant use localStorage. Using CookieStorage instead.",e)}}this.storage||(this.storage=new Ce,this.triedCookieStorage=!0)}return e.prototype.failover=function(){if(!(this.storage instanceof Ee)){var e=!1;this.storage instanceof Pe?this.triedCookieStorage||(this.storage=new Ce,this.triedCookieStorage=!0,e=!0):this.storage instanceof Ce&&(this.triedLocalStorage||(this.storage=new Pe,this.triedLocalStorage=!0,e=!0)),e||(this.storage=new Ee)}},e.prototype.getItem=function(e){try{return this.storage.getItem(e)}catch(t){return W.log("Cant getItem in storage.",t),this.failover(),this.storage.getItem(e)}},e.prototype.removeItem=function(e){try{return void this.storage.removeItem(e)}catch(t){W.log("Cant removeItem in storage.",t),this.failover(),this.storage.removeItem(e)}},e.prototype.setItem=function(e,t,n){try{return this.storage.setItem(e,t,n)}catch(r){return W.log("Cant setItem in storage.",r),this.failover(),this.storage.setItem(e,t,n)}},e}(),xe=function(){function t(e){this._cachedChainNetworks=[],this._oreIdContext=e.oreIdContext,this._cachedChainNetworks=null}return t.prototype.getAllChainNetworkSettings=function(){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){switch(n.label){case 0:return W.isNullOrEmpty(this._cachedChainNetworks)?[4,this.getConfigFromApi(e.ConfigType.Chains)]:[3,2];case 1:t=n.sent(),this._cachedChainNetworks=t.chains,n.label=2;case 2:return[2,this._cachedChainNetworks]}}))}))},t.prototype.getChainNetworkSettings=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.getAllChainNetworkSettings()];case 1:return[2,t.sent().find((function(t){return t.network===e}))]}}))}))},t.prototype.getConfig=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return[2,this.getConfigFromApi(e)]}))}))},t.prototype.getConfigFromApi=function(e){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){switch(n.label){case 0:return[4,z(this._oreIdContext,{configType:e})];case 1:if(t=n.sent(),W.isNullOrEmpty(t))throw new Error("Not able to retrieve config values for ".concat(e));return[2,t]}}))}))},t}(),Oe=W.isNullOrEmpty,De=function(){function t(e){var t,n,r;this.transitProvidersInstalled=[],this._options=null,this.validateAndSetOptions(e);var o=(null===(t=this.options)||void 0===t?void 0:t.storageHandler)||new Ne;this._localState=new _e(null===(n=this.options)||void 0===n?void 0:n.appId,o),this._settings=new xe({oreIdContext:this}),this._auth=new me({oreIdContext:this}),this._transitHelper=new ve({oreIdContext:this,user:this._auth.user}),this._transitHelper.installTransitProviders(null===(r=this.options)||void 0===r?void 0:r.eosTransitWalletProviders),this._initializerPlugins=e.plugins||{},this._isInitialized=!1}return Object.defineProperty(t.prototype,"accessToken",{get:function(){return this.auth.accessToken},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accessTokenHelper",{get:function(){return this.auth.accessTokenHelper},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"auth",{get:function(){return this._auth},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDemoApp",{get:function(){var e,t;return(null===(t=null===(e=this.options)||void 0===e?void 0:e.appId)||void 0===t?void 0:t.toLowerCase().startsWith("demo"))||!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isInitialized",{get:function(){return this._isInitialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"localState",{get:function(){return this._localState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"popup",{get:function(){return this.assertIsInitialized(),this._popup},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requiresProxyServer",{get:function(){var e,t;return!!(null===(e=null==this?void 0:this.options)||void 0===e?void 0:e.isUsingProxyServer)||!!(null===(t=null==this?void 0:this.options)||void 0===t?void 0:t.apiKey)&&(W.isInBrowser&&!this.isDemoApp)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitHelper",{get:function(){return this._transitHelper},enumerable:!1,configurable:!0}),t.prototype.init=function(){var e,t,n;return S(this,void 0,void 0,(function(){var r;return N(this,(function(o){switch(o.label){case 0:return this.isInitialized?[2]:(null===(e=this._initializerPlugins)||void 0===e?void 0:e.popup)?(r=this,[4,null===(n=null===(t=this._initializerPlugins)||void 0===t?void 0:t.popup)||void 0===n?void 0:n.init(this)]):[3,2];case 1:r._popup=o.sent(),o.label=2;case 2:return this._isInitialized=!0,[2]}}))}))},t.prototype.assertIsInitialized=function(){if(!this.isInitialized)throw new Error("OreId is not initialized - call init() first")},t.prototype.getAllChainNetworkSettings=function(){return S(this,void 0,void 0,(function(){return N(this,(function(e){return[2,this._settings.getAllChainNetworkSettings()]}))}))},t.prototype.getChainNetworkSettings=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return[2,this._settings.getChainNetworkSettings(e)]}))}))},t.prototype.logout=function(){this.auth.logout()},t.prototype.signStringWithWallet=function(t){return S(this,void 0,void 0,(function(){var n,r,o,i,s;return N(this,(function(a){switch(a.label){case 0:if(n=t.account,r=t.walletType,o=t.chainNetwork,!this.transitHelper.canSignString(r))throw Error("The specific walletType ".concat(r," does not support signString"));return[4,this.transitHelper.signStringWithTransitProvider(t)];case 1:return i=a.sent(),s=W.toEnumValue(e.AuthProvider,r),[4,this.transitHelper.callDiscoverAfterSign({account:n,chainNetwork:o,signOptions:{provider:s}})];case 2:return a.sent(),[2,i]}}))}))},t.prototype.custodialNewAccount=function(e){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){switch(n.label){case 0:return[4,B(this,e)];case 1:if((null==(t=n.sent())?void 0:t.errorCode)||(null==t?void 0:t.errorMessage))throw new Error(t.errorMessage);return[2,t]}}))}))},t.prototype.custodialMigrateAccount=function(e){return S(this,void 0,void 0,(function(){var t;return N(this,(function(n){switch(n.label){case 0:return[4,V(this,e)];case 1:if((null==(t=n.sent())?void 0:t.errorCode)||(null==t?void 0:t.errorMessage))throw new Error(t.errorMessage);return[2,t]}}))}))},t.prototype.getChainNetworkByChainId=function(e){return S(this,void 0,void 0,(function(){var t,n;return N(this,(function(r){switch(r.label){case 0:return[4,this.getAllChainNetworkSettings()];case 1:return t=r.sent(),n=t.find((function(t){return t.hosts.find((function(t){return t.chainId===e}))})),Oe(n)?[2,null]:[2,n.network]}}))}))},t.prototype.geExternalWalletInfo=function(e){if(!this._transitHelper.isTransitProvider(e))throw new Error("Invalid walletType:".concat(e));return he(e)},t.prototype.createTransaction=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return this._auth.user.hasData?[3,2]:[4,this._auth.user.getData()];case 1:t.sent(),t.label=2;case 2:return[2,new ke({oreIdContext:this,user:this.auth.user,data:e})]}}))}))},t.prototype.setIsBusy=function(e){this.isBusy!==e&&(this.isBusy=e,this.options.setBusyCallback&&this.options.setBusyCallback(e))},t.prototype.validateAndSetOptions=function(e){var t=e||{},n=t.appId,r=t.apiKey,o=t.oreIdUrl,i="";if(this._options=e,e&&(this.options.oreIdUrl=o||"https://service.oreid.io"),n||(i+="\n --\x3e Missing required parameter - appId. You can get an appId when you register your app with ORE ID."),this.requiresProxyServer&&r&&(i+="\n --\x3e You cant include the apiKey when creating an instance of OreId that runs in the browser. This is to prevent your key from being visible in the browser. If this app runs solely in the browser (like a Create React App), you need to set-up a proxy server to protect your keys. Refer to https://github.com/TeamAikon/ore-id-docs. Note: You wont get this error when using the appId and apiKey for a demo app (appId starts with demo_)."),""!==i)throw new Error("Options are missing or invalid. ".concat(i))},t.prototype.getAppAccessToken=function(e){return S(this,void 0,void 0,(function(){return N(this,(function(t){return[2,F(this,e)]}))}))},t.prototype.handleNewAccountResponse=function(e){var t=W.extractDataFromCallbackUrl(e),n=t.chain_account,r=t.process_id,o=t.state,i=t.errors;return this.setIsBusy(!1),{chainAccount:n,processId:r,state:o,errors:i}},t.prototype.handleSignCallback=function(e){var t,n=W.extractDataFromCallbackUrl(e),r=n.signed_transaction,o=n.process_id,i=n.state,s=n.transaction_id,a=n.errors;return a||(t=W.base64DecodeSafe(r)),this.setIsBusy(!1),{signedTransaction:t,processId:o,state:i,transactionId:s,errors:a}},t.prototype.appendTimestampAndSignatureToWidgetProps=function(e){return S(this,void 0,void 0,(function(){var t,n,r;return N(this,(function(o){switch(o.label){case 0:if((null==e?void 0:e.timestamp)&&(null==e?void 0:e.signature))return[2,e];t=P({},e),n=(null==e?void 0:e.timestamp)||(new Date).getTime(),t.origin=(null==e?void 0:e.origin)||(null===window||void 0===window?void 0:window.location.origin),t.timestamp=n,o.label=1;case 1:return o.trys.push([1,3,,4]),r=t,[4,Ae(this.requiresProxyServer,this.options.apiKey,JSON.stringify(W.sortJson(e)))];case 2:return r.signature=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,t]}}))}))},t.prototype.callOreIdApi=function(t,n,r,o,i){return void 0===r&&(r={}),void 0===i&&(i=null),S(this,void 0,void 0,(function(){var s,a,c,u,l,d,p,f,v,g,y,T;return N(this,(function(w){switch(w.label){case 0:if(c={},u=this.options,l=u.apiKey,d=u.oreIdUrl,p=this.requiresProxyServer?"/oreid":d,f="".concat(p,"/api/").concat(n),v=o||this.accessToken,!l&&!v&&!ie.includes(n))throw new Error("OreId API request requires either apiKey or accessToken");l&&(c["api-key"]=l),v&&(c.Authorization="Bearer ".concat(v)),Oe(i)||(c["process-id"]=i),c["sdk-version"]="oreidjs/".concat(oe),w.label=1;case 1:return w.trys.push([1,6,,7]),t!==e.RequestType.Get?[3,3]:(Oe(r)||(s=Object.keys(r).map((function(e){return"".concat(e,"=").concat(r[e])})).join("&")),g=s?"".concat(f,"?").concat(s):f,[4,h.default.get(g,{headers:c})]);case 2:a=w.sent(),w.label=3;case 3:return t!==e.RequestType.Post?[3,5]:(y=Oe(r)?null:JSON.stringify(r),[4,h.default.post(f,y,{headers:P({"Content-Type":"application/json"},c)})]);case 4:a=w.sent(),w.label=5;case 5:return[3,7];case 6:throw T=w.sent(),W.getErrorFromAxiosError(T);case 7:return[2,null==a?void 0:a.data]}}))}))},t.prototype.addAccessTokenAndHmacToUrl=function(e,t,n){var r,o,i;return S(this,void 0,void 0,(function(){var s,a,c,u,l;return N(this,(function(d){switch(d.label){case 0:return s=this.options.appId,this.requiresProxyServer?[4,h.default.post("/oreid/prepare-url",{appAccessTokenMetadata:t,urlString:e})]:[3,2];case 1:return a=d.sent(),[2,null===(r=null==a?void 0:a.data)||void 0===r?void 0:r.urlString];case 2:return c="".concat(e,"&app_id=").concat(s),Oe(t)?[3,5]:(l=n)?[3,4]:[4,this.getAppAccessToken({appAccessTokenMetadata:t})];case 3:l=d.sent(),d.label=4;case 4:u=l,c="".concat(c,"&app_access_token=").concat(u),d.label=5;case 5:return(null===(o=this.options)||void 0===o?void 0:o.apiKey)?[4,Ie(!1,null===(i=this.options)||void 0===i?void 0:i.apiKey,c)]:[3,7];case 6:c=d.sent(),d.label=7;case 7:return[2,c]}}))}))},t}();e.PluginType=void 0,(e.PluginType||(e.PluginType={})).Popup="popup",e.Auth=me,e.DummyStorage=Ee,e.Helpers=W,e.MemoryStorage=Se,e.OreId=De,e.Transaction=ke,e.User=Te,e.WidgetVersion="1",e.appendHmacToUrl=Ie,e.generateHmac=be,e.generateHmacWithApiKeyOrProxyServer=Ae,e.getTransitProviderAttributesByChain=function(e){return pe.filter((function(t){return t.chainType===e}))},e.transitProviderAttributesData=pe,Object.defineProperty(e,"__esModule",{value:!0})}));//# sourceMappingURL=index.js.map
